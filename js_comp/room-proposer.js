function __room_proposer__(h,l,m,k){var e=this;this.getOpenRoomNames=function(a){if(void 0===a)return[];var b;switch(a){case "main":b=$("#channels-list > li");break;case "pref":b=$("#modal-pref-favorite-rooms > li")}var c=[];b.each(function(a){c.push(k.helper.getSimpleText($(this)))});return c};this.createHtmlChildren=function(a,b){var c=e.getOpenRoomNames(b);console.log(JSON.stringify(c));for(var d="",g=0;g<a.length;g++){var f=a[g];-1===$.inArray(f.name,c)&&(d+="<li class='ui-bootstrap-list-item btn' data-owner='"+
f.owner+"'sn data-roomid='"+f.id+"' data-topic='"+f.topic+"'>"+f.name+"</li>")}""===d&&(d+='<p class="btn" disabled>No rooms found :(</p>');return d};this.addRoomSearcher=function(a,b){a.bind("propertychange keyup input paste",function(){var c=a.val();e.requestRoomsFromSearchTerm(c,b)})};this.requestRoomsFromSearchTerm=function(a,b){h.send(JSON.stringify({intent:"search-rooms",searchTerm:a,inputSource:b}))};this.handleIncomingSearchResults=function(a,b){var c=e.createHtmlChildren(a,b);switch(b){case "main":$("#add-new-room-rooms").empty();
$("#add-new-room-rooms").append($(c));$("#add-new-room-rooms > li").each(function(a,b){$(b).click(function(){k.onNewRoomClicked(b)})});break;case "pref":$("#modal-pref-nonfavorite-rooms").empty();$("#modal-pref-nonfavorite-rooms").append($(c));break;default:console.log("handleIncomingSearchResults: unknown inputSource")}};this.requestRoomProposals=function(a){a={intent:"room-proposals",userId:$("#user-id").html(),userName:l,list:a};h.send(JSON.stringify(a))};this.handleIncomingRoomProposals=function(a){a=
e.createHtmlChildren(a);$("#add-new-room-rooms").append($(a));$("#modal-pref-nonfavorite-rooms").append($(a))};exclusionList=[];m.forEach(function(a){exclusionList.push(a.roomId)});this.requestRoomProposals(exclusionList);$("#add-new-room").click(function(){e.addRoomSearcher($("#main-container #add-new-room-search"),"main")});this.addRoomSearcher($("#pref-select-favorite-channels-search"),"pref")};
